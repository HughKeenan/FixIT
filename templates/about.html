{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>FixIT ‚Äì Ask Me Anything</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body {
                background: linear-gradient(120deg, #a1c4fd, #c2e9fb, #f8fafc, #a1c4fd);
                background-size: 300% 300%;
                animation: gradientBG 12s ease-in-out infinite;
                min-height: 100vh;
                font-family: 'Segoe UI', 'Roboto', Arial, sans-serif;
                overflow-x: hidden;
            }
            @keyframes gradientBG {
                0% {background-position: 0% 50%;}
                50% {background-position: 100% 50%;}
                100% {background-position: 0% 50%;}
            }
            nav {
                background: #a1c4fd;
                background-size: 300% 300%;
                animation: gradientBG 12s ease-in-out infinite;
                overflow-x: hidden;
            }
            .navbar-brand {
                font-size: 2.7rem;
                font-weight: 900;
                letter-spacing: 2px;
                color: #007bff;
                background: linear-gradient(90deg, #007bff 60%, #00c6ff 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                display: inline-block;
                text-shadow: 0 4px 24px #00c6ff22;
                filter: drop-shadow(0 2px 10px #00c6ff44);
            }
            .navbar-brand span {
                color: #343a40 !important;
                -webkit-text-fill-color: #343a40;
            }
            .chat-box {
                height: 400px;
                overflow-y: auto;
                border: 1px solid #dee2e6;
                padding: 1rem;
                border-radius: 8px;
                background-color: white;
            }
            .user-msg, .bot-msg {
                margin-bottom: 1rem;
            }
            .user-msg {
                text-align: right;
            }
            .bot-msg {
                text-align: left;
            }
            .input-group{
                margin-bottom: 0.5rem;
            }
            #voice-input-group{
               margin-bottom: 0.3rem;
            }
            .btn-primary {
                background: linear-gradient(90deg, #007bff 60%, #00c6ff 100%);
                border: none;
                border-radius: 2rem;
                padding: 0.75rem 2rem;
                font-weight: 700;
                transition: background 0.3s ease;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            }
            .btn-primary:hover {
                background: linear-gradient(90deg, #0056b3 60%, #007bff 100%);
                box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2);
                transform: translateY(-2px);
            }
            .btn-outline-danger {
                border-radius: 2rem;
                padding: 0.5rem 1.5rem;
                font-weight: 600;
                transition: all 0.2s ease;
            }
            .btn-outline-danger:hover {
                background-color: #dc3545;
                color: white;
                box-shadow: 0 3px 9px rgba(0, 0, 0, 0.15);
                transform: translateY(-1px);
            }
            .btn-secondary {
                border-radius: 2rem;
                padding: 0.5rem 1.5rem;
                font-weight: 600;
                transition: all 0.2s ease;
            }
            .btn-secondary:hover {
                background-color: #6c757d;
                color: white;
                box-shadow: 0 3px 9px rgba(0, 0, 0, 0.15);
                transform: translateY(-1px);
            }
            .list-group-item {
                border-radius: 1rem;
                margin-bottom: 1rem;
                box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
                transition: transform 0.2s ease;
            }
            .list-group-item:hover {
                transform: translateY(-2px) scale(1.01);
                box-shadow: 0 4px 10px rgba(0, 0, 0, 0.12);
            }
            .footer-fancy {
                background: rgba(255,255,255,0.97);
                padding: 2.5rem 0 1.5rem 0;
                margin-top: 4rem;
                border-top: 1px solid #dee2e6;
            }

            .footer-logo {
                letter-spacing: 1px;
                background: linear-gradient(90deg, #007bff 60%, #00c6ff 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                display: inline-block;
            }
            .footer-link {
                color: #007bff;
                text-decoration: none;
                font-weight: 500;
                transition: color 0.2s;
            }
            .footer-link:hover {
                color: #0056b3;
                text-decoration: underline;
            }
            @media (max-width: 600px) {
                .footer-fancy .d-flex {
                    flex-direction: column !important;
                    gap: 0.5rem !important;
                }
            }
            .about_text{
                font-weight: 500;
            }
            .about_line{
                text-decoration: underline;
                text-decoration-thickness: 2px;
                text-underline-offset: 10px;
            }
        </style>
    </head>
    <body>

        <!-- üåê Navbar -->
        <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
            <div class="container">
                <a class="navbar-brand auth-logo" href="/">Fix<span>IT</span> <span class="emoji" style="font-size:2rem;color:#ffc107;">üõ†Ô∏è</span></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse justify-content-end" id="navbarNav">
                    <ul class="navbar-nav">
                        <li class="nav-item">
                            <a class="nav-link" href="/">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="/history">History</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <!-- Info about the site -->
        <main class="container my-5">
        <div class="text-center mb-4">
            <h1 class="display-5 fw-bold">About this site</h1>
        </div>

        <div class="row">
            <div class="col-md-6 mb-5 mt-5">
                <h2 class = "about_line">Our purpose:</h2>
                <p class = "about_text">Technology moves fast, and isn't always easy to navigate. 
                    The team behind the site decided a modern solution was needed for a modern problem. This site uses an AI to 
                    provide solutions to common problems with technology. The goal behind was to enable inexperienced users to 
                    easily find solutions on their own that are delivered in simple, easy to understand language, 
                    without having to navigate through pages of search results they may not understand. 
                    Granchildren of the world, rejoice! Your long years of service as tech support are at an end!</p>
            </div>
            <div class="col-md-6 mb-5 mt-5 text-end">
                <img src="{% static 'images/confused.png' %}" alt="Image of a woman using a computer">
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-5 mt-5">
                <img src="{% static 'images/help.png' %}" alt="Image of a robot helping a person witha computer">
            </div>
            <div class="col-md-6 mb-5 mt-5">
                <h2 class = "about_line">How to use the site:</h2>
                <p class = "about_text">This site enables users to ask the AI for solutions to their problems in the same manner as they would ask
                    another person. Simply type your question into the box on the home page, and the computer will provide an
                    answer for you. Alternatively, for those who have difficulty typing, by clicking the button beneath the box, 
                    you can make queries by speech instead. If the answer is unclear, you can ask the computer to provide more detail. 
                    Users can visit our site for free as many times as they wish. For those who feel they might like more regular 
                    help, there is the option of creating an account on the site. This has a few benefits, such as tracking your previous 
                    questions. If you got an answer you really liked to a problem, then as a member that will be saved for you 
                    to refer back to whenever you need it.</p>
            </div>
        </div>

        <div class="text-center mb-5 mt-5">
            <h2 class = "about_line">Further Information/ Bug Reports:</h2>
            <p class = "about_text">If you have any more questions about the site, please feel free to contact us at support@fixit.com.</p>
            <p class = "about_text">We also request that if you encounter a bug (e.g. page not loading, inappropriate/nonsensical response from 
                the AI etc.) please send us a message describing what happened to bugs@fixit.com.
            </p>
        </div>

        </main>

        <!-- üìÑ Footer -->
        <footer class="footer-fancy py-4 text-center mt-5">
            <div class="container">
                <div class="d-flex flex-column flex-md-row align-items-center justify-content-center gap-3 mb-2">
                    <span class="footer-logo fw-bold" style="font-size:1.3rem; color:#007bff;">
                        Fix<span style="color:#343a40;">IT</span> <span style="font-size:1.2rem;color:#ffc107;">üõ†Ô∏è</span>
                    </span>
                    <span class="text-muted small">|</span>
                    <span class="text-muted small">Making tech a little less scary</span>
                </div>
                <div class="footer-links mb-2">
                    <a href="#" class="footer-link mx-2">About</a>
                    <a href="#" class="footer-link mx-2">Contact</a>
                    <a href="#" class="footer-link mx-2">Privacy</a>
                </div>
                <p class="mb-0 text-muted small">&copy; {{ year|default:"2024" }} FixIT. All rights reserved.</p>
            </div>
        </footer>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
        document.getElementById('chatForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const input = document.getElementById('userInput');
            const chatBox = document.getElementById('chatBox');

            const userMsg = `<div class="user-msg"><strong>You:</strong> ${input.value}</div>`;
            chatBox.innerHTML += userMsg;
            chatBox.scrollTop = chatBox.scrollHeight;

            fetch('/ask-ai/', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            },
            body: new URLSearchParams({ user_input: input.value })
            })
            .then(res => res.json())
            .then(data => {
            const reply = data.answer || "Sorry, I couldn't understand that.";
            const botMsg = `<div class="bot-msg"><strong>FixIT:</strong> ${reply}</div>`;
            chatBox.innerHTML += botMsg;
            chatBox.scrollTop = chatBox.scrollHeight;
            });

            input.value = '';
        });
        </script>
    </body>
</html>